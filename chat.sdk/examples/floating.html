<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heshev Chat - Floating Example</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #f5f5f5;
      min-height: 200vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      margin-bottom: 20px;
      color: #333;
    }

    .content {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    p {
      line-height: 1.6;
      margin-bottom: 15px;
      color: #555;
    }

    .highlight {
      background-color: #fff3cd;
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
    }

    .code-block {
      background-color: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      overflow-x: auto;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 13px;
    }

    .info-box {
      background-color: #e7f3ff;
      border-left: 4px solid #0066cc;
      padding: 15px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Heshev Chat - Floating Mode Demo</h1>

    <div class="content">
      <h2>Welcome to the Demo</h2>
      <p>
        This page demonstrates the floating button mode of the Heshev Chat SDK.
        Look at the bottom-right corner of the page - you'll see a chat button!
      </p>

      <div class="highlight">
        <strong>Click the chat button</strong> in the corner to open the chat widget.
        The chat will appear as an overlay on top of this page.
      </div>

      <h3>How it works</h3>
      <p>
        The floating mode is perfect for adding chat functionality to any website
        without modifying the existing layout. Just include the SDK and initialize it:
      </p>

      <div class="code-block">
const chat = new HeshevChat({
  websocketUrl: 'ws://localhost:3001/ws',
  mode: 'floating',
  floatingPosition: 'bottom-right',
  theme: 'light',
  onReady: () => console.log('Chat ready!')
});

chat.init();
      </div>

      <div class="info-box">
        <strong>Note:</strong> Make sure the chat server is running on localhost:3001
        for this demo to work. Run <code>pnpm dev</code> in the chat.server directory.
      </div>

      <h3>Features</h3>
      <p>The floating chat widget supports:</p>
      <ul style="margin-left: 20px; margin-bottom: 15px;">
        <li>Click outside to close (optional)</li>
        <li>Smooth open/close animations</li>
        <li>Customizable position (bottom-right or bottom-left)</li>
        <li>Custom button icon or text</li>
        <li>Same chat functionality as embedded mode</li>
      </ul>

      <h3>Scroll Down</h3>
      <p>
        Try scrolling down the page. Notice how the chat button stays fixed in the corner,
        always accessible no matter where you are on the page.
      </p>
    </div>

    <div class="content">
      <h2>More Content</h2>
      <p>
        This additional content is here to demonstrate that the floating chat
        works well with longer pages. The chat button remains visible and accessible
        as you scroll through the page content.
      </p>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor
        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
        exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
      </p>
      <p>
        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
        fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
        culpa qui officia deserunt mollit anim id est laborum.
      </p>
    </div>
  </div>

  <!-- Load the SDK bundle -->
  <script src="../dist/heshev-chat.umd.js"></script>

  <script>
    let chat;

    async function initChat() {
      try {
        chat = new HeshevChat({
          websocketUrl: 'ws://localhost:3001/ws',
          mode: 'floating',
          floatingPosition: 'bottom-right',
          theme: 'light',
          onReady: () => {
            console.log('Chat is ready!');
          },
          onOpen: () => {
            console.log('Chat opened');
          },
          onClose: () => {
            console.log('Chat closed');
          },
          onStatusChange: (status) => {
            console.log('Connection status:', status);
          },
          onMessage: (message) => {
            console.log('Message received:', message);
          },
          onError: (error) => {
            console.error('Chat error:', error);
          },
        });

        await chat.init();

        // Auto-load context
        await chat.loadContextData({
          system: 'You are a helpful assistant for this demo website. Be friendly and concise.',
        });

        console.log('Chat initialized successfully!');
      } catch (error) {
        console.error('Failed to initialize chat:', error);
      }
    }

    // Initialize on page load
    initChat();

    // Expose chat instance for debugging
    window.chat = chat;
  </script>
</body>
</html>
